package research;

import com.slightlyloony.jsisyphus.ATrack;
import com.slightlyloony.jsisyphus.DrawingContext;
import com.slightlyloony.jsisyphus.Point;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

/**
 * Created by IntelliJ IDEA.
 * User: mark
 * Date: 2/28/18
 * Time: 8:44 AM
 */
public class SpiralFiller3 extends ATrack {

    double xDelta=.01;
    double yDelta=.01;

    private Ball balls[] = {
            new Ball(0.0575139146567718, 0.23562152133580705, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.8218923933209648, 0.23562152133580705, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.8849721706864564, 0.23562152133580705, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.46567717996289426, 0.23562152133580705, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.23562152133580705, -0.5287569573283859, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.5287569573283859, -0.5287569573283859, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.7068645640074211, -0.5287569573283859, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.0575139146567718, -0.5287569573283859, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.8218923933209648, -0.5287569573283859, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.4137291280148423, -0.5287569573283859, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.35064935064935066, -0.5287569573283859, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.8849721706864564, -0.5287569573283859, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.23562152133580705, 0.7068645640074211, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.5287569573283859, 0.7068645640074211, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.7068645640074211, 0.7068645640074211, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.0575139146567718, 0.7068645640074211, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.8218923933209648, 0.7068645640074211, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.4137291280148423, 0.7068645640074211, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.35064935064935066, 0.7068645640074211, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.8849721706864564, 0.7068645640074211, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.0575139146567718, -0.0575139146567718, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.8849721706864564, -0.0575139146567718, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.46567717996289426, -0.0575139146567718, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.8738404452690167, -0.0575139146567718, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.28014842300556586, -0.0575139146567718, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.23562152133580705, -0.8218923933209648, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.5287569573283859, -0.8218923933209648, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.7068645640074211, -0.8218923933209648, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.0575139146567718, -0.8218923933209648, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.8218923933209648, -0.8218923933209648, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.4137291280148423, -0.8218923933209648, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.35064935064935066, -0.8218923933209648, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.8849721706864564, -0.8218923933209648, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.23562152133580705, 0.4137291280148423, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.7068645640074211, 0.4137291280148423, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.0575139146567718, 0.4137291280148423, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.4137291280148423, 0.4137291280148423, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.35064935064935066, 0.4137291280148423, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.8849721706864564, 0.4137291280148423, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.8738404452690167, 0.4137291280148423, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.23562152133580705, -0.35064935064935066, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.8218923933209648, -0.35064935064935066, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.8849721706864564, -0.35064935064935066, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.1725417439703154, -0.35064935064935066, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.23562152133580705, 0.8849721706864564, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.5287569573283859, 0.8849721706864564, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.7068645640074211, 0.8849721706864564, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.0575139146567718, 0.8849721706864564, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.8218923933209648, 0.8849721706864564, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.4137291280148423, 0.8849721706864564, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.35064935064935066, 0.8849721706864564, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.8849721706864564, 0.8849721706864564, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.06864564007421148, -0.6437847866419295, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.6957328385899815, -0.6437847866419295, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.5398886827458256, -0.6437847866419295, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.22448979591836737, -0.6437847866419295, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.06864564007421148, 0.5918367346938775, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.6957328385899815, 0.5918367346938775, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.5398886827458256, 0.5918367346938775, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.22448979591836737, 0.5918367346938775, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.5287569573283859, 0.47680890538033394, 0.08534322820037106, (int)7.25417439703154),
            new Ball(0.6437847866419295, -0.4025974025974026, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.5918367346938775, -0.4025974025974026, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.06864564007421148, -0.4025974025974026, 0.08534322820037106, (int)7.25417439703154),
            new Ball(-0.09090909090909094, -0.914656771799629, 0.08163265306122448, (int)6.938775510204081),
            new Ball(0.6734693877551021, -0.914656771799629, 0.08163265306122448, (int)6.938775510204081),
            new Ball(-0.5621521335807049, -0.914656771799629, 0.08163265306122448, (int)6.938775510204081),
            new Ball(0.20222634508348802, -0.914656771799629, 0.08163265306122448, (int)6.938775510204081),
            new Ball(-0.09090909090909094, 0.7922077922077921, 0.08163265306122448, (int)6.938775510204081),
            new Ball(0.6734693877551021, 0.7922077922077921, 0.08163265306122448, (int)6.938775510204081),
            new Ball(-0.5621521335807049, 0.7922077922077921, 0.08163265306122448, (int)6.938775510204081),
            new Ball(0.20222634508348802, 0.7922077922077921, 0.08163265306122448, (int)6.938775510204081),
            new Ball(0.914656771799629, -0.6734693877551021, 0.08163265306122448, (int)6.938775510204081),
            new Ball(-0.32096474953617815, -0.6734693877551021, 0.08163265306122448, (int)6.938775510204081),
            new Ball(0.4434137291280149, -0.6734693877551021, 0.08163265306122448, (int)6.938775510204081),
            new Ball(-0.7922077922077921, -0.6734693877551021, 0.08163265306122448, (int)6.938775510204081),
            new Ball(-0.32096474953617815, 0.5621521335807049, 0.08163265306122448, (int)6.938775510204081),
            new Ball(-0.7922077922077921, 0.5621521335807049, 0.08163265306122448, (int)6.938775510204081),
            new Ball(0.4397031539888683, -0.39146567717996295, 0.07792207792207792, (int)6.623376623376624),
            new Ball(0.9183673469387754, 0.10204081632653061, 0.07792207792207792, (int)6.623376623376624),
            new Ball(0.9183673469387754, 0.5732838589981447, 0.07792207792207792, (int)6.623376623376624),
            new Ball(0.9183673469387754, -0.2170686456400741, 0.07792207792207792, (int)6.623376623376624),
            new Ball(-0.2690166975881262, 0.23562152133580705, 0.07421150278293136, (int)6.307977736549165),
            new Ball(-0.09090909090909094, 0.3543599257884972, 0.07050092764378478, (int)5.992578849721706),
            new Ball(0.20222634508348802, 0.3543599257884972, 0.07050092764378478, (int)5.992578849721706),
            new Ball(-0.9332096474953617, 0.09090909090909094, 0.06679035250463822, (int)5.6771799628942485),
            new Ball(0.4025974025974026, 0.5621521335807049, 0.06679035250463822, (int)5.6771799628942485),
            new Ball(-0.9332096474953617, -0.20222634508348802, 0.06679035250463822, (int)5.6771799628942485),
            new Ball(-0.47680890538033394, -0.11688311688311681, 0.06679035250463822, (int)5.6771799628942485),
            new Ball(-0.4137291280148423, -0.37662337662337664, 0.06679035250463822, (int)5.6771799628942485),
            new Ball(0.9294990723562153, -0.9294990723562153, 0.06679035250463822, (int)5.6771799628942485),
            new Ball(-0.5621521335807049, 0.37291280148423, 0.06307977736549165, (int)5.361781076066791),
            new Ball(-0.9369202226345084, -0.6734693877551021, 0.06307977736549165, (int)5.361781076066791),
            new Ball(-0.9369202226345084, 0.5621521335807049, 0.06307977736549165, (int)5.361781076066791),
            new Ball(0.20593692022263443, -0.4953617810760669, 0.06307977736549165, (int)5.361781076066791),
            new Ball(0.6437847866419295, 0.21706864564007422, 0.06307977736549165, (int)5.361781076066791),
            new Ball(-0.7402597402597403, -0.3840445269016697, 0.06307977736549165, (int)5.361781076066791),
            new Ball(-0.2690166975881262, -0.20593692022263443, 0.06307977736549165, (int)5.361781076066791),
            new Ball(-0.09090909090909094, 0.9369202226345084, 0.06307977736549165, (int)5.361781076066791),
            new Ball(0.6734693877551021, 0.9369202226345084, 0.06307977736549165, (int)5.361781076066791),
            new Ball(-0.5621521335807049, 0.9369202226345084, 0.06307977736549165, (int)5.361781076066791),
            new Ball(0.20222634508348802, 0.9369202226345084, 0.06307977736549165, (int)5.361781076066791),
            new Ball(0.14656771799628943, -0.1725417439703154, 0.059369202226345084, (int)5.046382189239332),
            new Ball(-0.3246753246753247, -0.9369202226345084, 0.059369202226345084, (int)5.046382189239332),
            new Ball(0.4397031539888683, -0.9369202226345084, 0.059369202226345084, (int)5.046382189239332),
            new Ball(-0.7959183673469388, -0.9369202226345084, 0.059369202226345084, (int)5.046382189239332),
            new Ball(0.07606679035250474, -0.6734693877551021, 0.059369202226345084, (int)5.046382189239332),
            new Ball(0.07606679035250474, 0.5621521335807049, 0.059369202226345084, (int)5.046382189239332),
            new Ball(-0.3432282003710575, 0.12430426716140996, 0.059369202226345084, (int)5.046382189239332),
            new Ball(0.9369202226345084, -0.4397031539888683, 0.059369202226345084, (int)5.046382189239332),
            new Ball(0.9369202226345084, 0.7959183673469388, 0.059369202226345084, (int)5.046382189239332),
            new Ball(-0.47680890538033394, 0.12430426716140996, 0.055658627087198514, (int)4.7309833024118735),
            new Ball(0.7959183673469388, -0.1725417439703154, 0.05194805194805195, (int)4.415584415584416),
            new Ball(0.9443413729128014, 0.948051948051948, 0.05194805194805195, (int)4.415584415584416),
            new Ball(0.30612244897959173, -0.39146567717996295, 0.05194805194805195, (int)4.415584415584416),
            new Ball(-0.10204081632653061, -0.7773654916512058, 0.05194805194805195, (int)4.415584415584416),
            new Ball(0.6623376623376624, -0.7773654916512058, 0.05194805194805195, (int)4.415584415584416),
            new Ball(-0.5732838589981447, -0.7773654916512058, 0.05194805194805195, (int)4.415584415584416),
            new Ball(0.19109461966604813, -0.7773654916512058, 0.05194805194805195, (int)4.415584415584416),
            new Ball(0.7365491651205938, 0.4582560296846011, 0.05194805194805195, (int)4.415584415584416),
            new Ball(0.5398886827458256, -0.17996289424860845, 0.05194805194805195, (int)4.415584415584416),
            new Ball(-0.948051948051948, -0.9443413729128014, 0.05194805194805195, (int)4.415584415584416),
            new Ball(0.7959183673469388, 0.0575139146567718, 0.05194805194805195, (int)4.415584415584416),
            new Ball(0.9443413729128014, 0.2987012987012987, 0.04823747680890538, (int)4.100185528756957),
            new Ball(0.5435992578849722, -0.287569573283859, 0.04823747680890538, (int)4.100185528756957),
            new Ball(-0.8218923933209648, 0.12059369202226344, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.8218923933209648, -0.1725417439703154, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.19480519480519476, -0.6957328385899815, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.5695732838589982, -0.6957328385899815, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.6660482374768089, -0.6957328385899815, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.19480519480519476, 0.5398886827458256, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.6660482374768089, 0.5398886827458256, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.9517625231910947, -0.8107606679035251, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.9517625231910947, -0.5473098330241188, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.5473098330241188, 0.3432282003710575, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.11317254174397029, 0.4693877551020408, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.17996289424860845, 0.4693877551020408, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.9517625231910947, -0.33580705009276435, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.9517625231910947, 0.6920222634508348, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.0575139146567718, -0.9517625231910947, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.8107606679035251, -0.9517625231910947, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.43599257884972176, -0.9517625231910947, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.3283858998144713, -0.9517625231910947, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.21706864564007422, -0.9517625231910947, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.5473098330241188, -0.9517625231910947, 0.04452690166975881, (int)3.784786641929499),
            new Ball(-0.6883116883116883, -0.9517625231910947, 0.04452690166975881, (int)3.784786641929499),
            new Ball(0.04638218923933213, -0.35064935064935066, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(0.5473098330241188, 0.12059369202226344, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(-0.5732838589981447, 0.12059369202226344, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(-0.5918367346938775, 0.47680890538033394, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(0.6957328385899815, -0.5176252319109462, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(-0.5398886827458256, -0.5176252319109462, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(0.5473098330241188, 0.038961038961038974, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(0.8070500927643784, 0.5213358070500927, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(-0.37291280148423, -0.14656771799628943, 0.04081632653061224, (int)3.4693877551020407),
            new Ball(-0.11317254174397029, -0.5287569573283859, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(0.5732838589981446, 0.5918367346938775, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(0.46567717996289426, 0.36178107606679033, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(0.39146567717996295, -0.16141001855287573, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(-0.5769944341372912, -0.15027829313543606, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(-0.3246753246753247, -0.4434137291280149, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(-0.3246753246753247, 0.7922077922077921, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(0.4397031539888683, 0.7922077922077921, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(-0.7959183673469388, 0.7922077922077921, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(0.16883116883116878, -0.0018552875695732052, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(0.6474953617810761, 0.4397031539888683, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(0.9591836734693877, 0.20964749536178107, 0.03710575139146568, (int)3.1539888682745825),
            new Ball(0.4990723562152133, 0.5918367346938775, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(0.1725417439703154, 0.18367346938775508, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.005565862708719838, -0.16141001855287573, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.3246753246753247, 0.3320964749536178, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.7959183673469388, 0.3320964749536178, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.8144712430426716, 0.038961038961038974, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.8144712430426716, -0.25417439703154, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(0.7996289424860854, -0.7031539888682745, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.43599257884972176, -0.7031539888682745, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(0.3283858998144713, -0.7031539888682745, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.43599257884972176, 0.5324675324675325, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.9666048237476809, 0.3246753246753247, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.9666048237476809, -0.4397031539888683, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.9666048237476809, 0.7959183673469388, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.5176252319109462, 0.4730983302411874, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.3246753246753247, 0.9666048237476809, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(0.4397031539888683, 0.9666048237476809, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(-0.7959183673469388, 0.9666048237476809, 0.03339517625231911, (int)2.8385899814471243),
            new Ball(0.8107606679035251, 0.5918367346938775, 0.029684601113172542, (int)2.523191094619666),
            new Ball(0.0575139146567718, -0.1725417439703154, 0.029684601113172542, (int)2.523191094619666),
            new Ball(0.4582560296846012, -0.1725417439703154, 0.029684601113172542, (int)2.523191094619666),
            new Ball(-0.038961038961038974, 0.47680890538033394, 0.029684601113172542, (int)2.523191094619666),
            new Ball(0.25417439703154, 0.47680890538033394, 0.029684601113172542, (int)2.523191094619666),
            new Ball(0.1725417439703154, 0.24675324675324672, 0.029684601113172542, (int)2.523191094619666),
            new Ball(-0.18367346938775508, 0.30983302411873836, 0.029684601113172542, (int)2.523191094619666),
            new Ball(0.29499072356215206, 0.30983302411873836, 0.029684601113172542, (int)2.523191094619666),
            new Ball(-0.9703153988868275, 0.9703153988868275, 0.029684601113172542, (int)2.523191094619666),
            new Ball(0.1725417439703154, -0.08719851576994442, 0.029684601113172542, (int)2.523191094619666),
            new Ball(0.7773654916512058, 0.3432282003710575, 0.029684601113172542, (int)2.523191094619666),
            new Ball(-0.5732838589981447, -0.08348794063079779, 0.029684601113172542, (int)2.523191094619666),
            new Ball(0.8107606679035251, -0.6437847866419295, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.42486085343228197, -0.6437847866419295, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.339517625231911, -0.6437847866419295, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.42486085343228197, 0.5918367346938775, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.3692022263450836, 0.2987012987012987, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.966604823747681, 0.005565862708719838, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.966604823747681, 0.47680890538033394, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.4990723562152134, -0.339517625231911, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.7699443413729128, 0.13172541743970312, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.7959183673469388, -0.4545454545454546, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.0278293135435993, -0.7476808905380334, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.7365491651205938, -0.7476808905380334, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.4990723562152134, -0.7476808905380334, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.26530612244897966, -0.7476808905380334, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.7699443413729128, -0.0983302411873841, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.7476808905380334, -0.4434137291280149, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.4879406307977736, -0.4434137291280149, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.33580705009276435, 0.038961038961038974, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.11688311688311681, -0.25417439703154, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.12430426716140996, 0.6883116883116883, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.6400742115027829, 0.6883116883116883, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.5955473098330242, 0.6883116883116883, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.16883116883116878, 0.6883116883116883, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.39146567717996295, -0.07606679035250474, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.31725417439703163, 0.5213358070500927, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.7254174397031541, 0.17625231910946193, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.9703153988868274, -0.11688311688311681, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.974025974025974, -0.7551020408163265, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.974025974025974, 0.48051948051948057, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.00927643784786647, 0.974025974025974, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.7551020408163265, 0.974025974025974, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.48051948051948057, 0.974025974025974, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.2838589981447124, 0.974025974025974, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.7699443413729128, -0.25046382189239336, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.0575139146567718, -0.41743970315398893, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.17996289424860856, -0.6252319109461966, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.5844155844155845, -0.6252319109461966, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.6512059369202227, -0.6252319109461966, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.17996289424860856, 0.6103896103896104, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.6512059369202227, 0.6103896103896104, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.7699443413729128, -0.016697588126159513, 0.025974025974025976, (int)2.207792207792208),
            new Ball(0.5398886827458256, -0.36178107606679033, 0.025974025974025976, (int)2.207792207792208),
            new Ball(-0.05009276437847865, -0.5287569573283859, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.974025974025974, 0.005565862708719838, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.37662337662337664, 0.005565862708719838, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.974025974025974, -0.287569573283859, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.5621521335807049, 0.18367346938775508, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.5695732838589982, -0.10946196660482377, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.020408163265306145, 0.016697588126159513, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.974025974025974, 0.37291280148423, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.16883116883116878, -0.4434137291280149, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.1280148423005565, -0.7365491651205938, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.6400742115027829, 0.4990723562152134, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.8738404452690167, -0.966604823747681, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.5695732838589982, 0.2690166975881262, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.5695732838589982, -0.024118738404452778, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.4842300556586271, 0.3320964749536178, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.0018552875695732052, 0.5102040816326531, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.6400742115027829, -0.5473098330241188, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.5955473098330242, -0.5473098330241188, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.5361781076066789, -0.42115027829313534, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.19109461966604813, -0.2430426716141001, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.974025974025974, 0.8775510204081632, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.9777365491651206, 0.17625231910946193, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.9777365491651206, -0.5881261595547309, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.9777365491651206, 0.6474953617810761, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.9777365491651206, -0.11688311688311681, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.29128014842300554, 0.061224489795918324, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.13172541743970312, -0.45083487940630795, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.005565862708719838, -0.974025974025974, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.6363636363636364, 0.3246753246753247, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.16883116883116878, 0.974025974025974, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.5955473098330242, 0.974025974025974, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(-0.6400742115027829, 0.974025974025974, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.12430426716141008, 0.974025974025974, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.35064935064935066, -0.3320964749536177, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.27643784786641934, -0.32096474953617804, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.37662337662337664, 0.1725417439703154, 0.022263450834879406, (int)1.8923933209647494),
            new Ball(0.4397031539888683, 0.6437847866419295, 0.022263450834879406, (int)1.8923933209647494),
    };

    public SpiralFiller3() throws Exception {
        super("");

//        ArrayList<Ball> ballsList = new ArrayList<>();
//
//        double space=.15;
//        double size=.065;

//        for (double y=1.21; y>-1.2; y-=space) {
//            for (double x=-1.21; x<1.2; x+=space){
//                double theta = Math.abs(Point.fromXY(x,y).theta);
//                double rho = Point.fromXY(x,y).rho;
//
//                double minRotations=3;
//                double maxRotations=12;
//                double rotations=minRotations+(maxRotations-minRotations)*rho;
//
//                ballsList.add(new Ball(x, y, size, (int)rotations));
//            }
//        }
//
//        balls=ballsList.toArray(new Ball[0]);

        trace();
    }

    protected void trace() throws IOException {
        double x=0;
        double y=1.25;

        Point tempPoint=Point.fromXY(x, y);

        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(tempPoint));

        while (tempPoint.y>=-1.25) {
            tempPoint = lineItUp(dc, tempPoint, xDelta, yDelta, -1);

            if (tempPoint.y >= -1.25) {
                tempPoint = lineItUp(dc, tempPoint, xDelta, yDelta, +1);
            }
        }

        dc.renderPNG( "c:\\users\\mark\\desktop\\fill.png" );
        dc.write( "c:\\users\\mark\\desktop\\fill.thr" );

        Runtime.getRuntime().exec("cmd /C start c:\\users\\mark\\desktop\\fill.png");
    }

    private Point lineItUp(DrawingContext dc, Point tempPoint, double xDelta, double yDelta, int multipler){
        List<Ball> balls = getBalls(tempPoint.y, multipler);

        for (Ball ball : balls){
            tempPoint = Point.fromXY(ball.x, tempPoint.y);
            dc.lineTo(dc.getCurrentRelativePosition().vectorTo(tempPoint));

            eraseAndCircle(dc, ball.size, ball.turns);
        }

        tempPoint = Point.fromXY(multipler*Math.sqrt(1-tempPoint.y*tempPoint.y), tempPoint.y);
        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(tempPoint));

        Point tempPoint2 = Point.fromXY(tempPoint.x, tempPoint.y-yDelta);

        tempPoint2 = Point.fromXY(multipler*Math.sqrt(1-tempPoint2.y*tempPoint2.y), tempPoint2.y);

        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(tempPoint2));

        return tempPoint2;
    }

    private List<Ball> getBalls(double y, final int multiplier){
        ArrayList<Ball> ret = new ArrayList<>();

        for (int i=0; i<balls.length; i++){
            if (balls[i]!=null && y<balls[i].y){
                ret.add(balls[i]);

                balls[i]=null;
            }
        }

        Collections.sort(ret, new Comparator<Ball>() {
            @Override
            public int compare(Ball o1, Ball o2) {
                return multiplier*Double.compare(o1.x, o2.x);
            }
        });

        return ret;
    }

    private void eraseAndCircle(DrawingContext dc, double size, int turns){
        double x=dc.getCurrentPosition().getX();
        double y=dc.getCurrentPosition().getY();

        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2+size)));

    //    dc.spiralToXY(0, size, 0, size, 15);
        dc.spiralToXY(0, -size, 0, 0, turns);
        dc.arcAround(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2+size)), 2*Math.PI);
//        dc.arcAround(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2+size)), 2*Math.PI);
//        dc.arcAround(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2+size)), 2*Math.PI);
        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y)));

//        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2)));
//        //  dc.arcAroundRT(size, 0, Math.PI*2);
//        dc.spiralToXY(0, size, 0, size, 15);
//        dc.spiralToXY(0, -size, 0, 0, 15);
//        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y)));
    }

    private void eraseAndCircle2(DrawingContext dc, double size, int turns){
        double x=dc.getCurrentPosition().getX();
        double y=dc.getCurrentPosition().getY();

        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2+size)));

        double rho=0;
        double theta=0;

        double eraseSpace=0.2;

        while (true){
            theta+=.05;

            rho=theta / (2 * Math.PI) * (eraseSpace);

            double additionalRho=.5 * Math.sin(theta*10) * eraseSpace;    //background;

            Point dest = Point.fromRT(rho+additionalRho, theta);

            if (dest.rho>1){
                break;
            }

            Point dest2 = Point.fromXY(x + size*dest.x, y + size*dest.y);

            dc.lineTo(dc.getCurrentRelativePosition().vectorTo(dest2));
        }

//        dc.arcAround(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2+size)), 2*Math.PI);
//        dc.arcAround(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2+size)), 2*Math.PI);
//        dc.arcAround(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2+size)), 2*Math.PI);
        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y)));

//        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y+xDelta*1.2)));
//        //  dc.arcAroundRT(size, 0, Math.PI*2);
//        dc.spiralToXY(0, size, 0, size, 15);
//        dc.spiralToXY(0, -size, 0, 0, 15);
//        dc.lineTo(dc.getCurrentRelativePosition().vectorTo(Point.fromXY(x, y)));
    }

    public static void main(String args[]) throws Exception {
        SpiralFiller3 me = new SpiralFiller3();
    }

    public class Ball {
        private double x, y, size;
        private int turns;

        public Ball(double x, double y, double size, int turns) {
            this.x = x;
            this.y = y-size-(xDelta*1.2);
            this.size = size;
            this.turns = turns;
        }
    }
}